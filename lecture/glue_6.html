<!DOCTYPE html>
<html lang="en">

<head>
    <title>Test</title>
</head>

<body>

    <h3>날씨 확인하기</h3>

    <form onsubmit="return getWeather();">
        <label>
            지역 선택:
            <select id="city">
                <option value="">-- 지역을 선택하세요 --</option>
                <option value="seoul">서울</option>
                <option value="busan">부산</option>
                <option value="daegu">대구</option>
                <option value="incheon">인천</option>
                <option value="gwangju">광주</option>
            </select>
        </label>
        <br><br>
        <button type="submit">날씨 확인하기</button>
    </form>

    <hr>

    <!-- 결과 출력 영역 -->
    <div id="result"></div>

    <script>
        function getWeather() {
            let city = document.getElementById("city").value;
            let resultDiv = document.getElementById("result");

            if (city === "") {
                alert("지역을 선택하세요.");
                return false;
            }

            const coords = {
                seoul: { lat: 37.5665, lon: 126.9780, name: "서울" },
                busan: { lat: 35.1796, lon: 129.0756, name: "부산" },
                daegu: { lat: 35.8714, lon: 128.6014, name: "대구" },
                incheon: { lat: 37.4563, lon: 126.7052, name: "인천" },
                gwangju: { lat: 35.1595, lon: 126.8526, name: "광주" }
            };

            const lat = coords[city].lat;
            const lon = coords[city].lon;
            const cityName = coords[city].name;

            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
            //외부 api 호출
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const temp = data.current_weather.temperature;
                    const wind = data.current_weather.windspeed;

                    // 동적으로 HTML 생성
                    resultDiv.innerHTML = `
                        <h4>날씨 정보</h4>
                        <p>지역: ${cityName}</p>
                        <p>현재 온도: ${temp} ℃</p>
                        <p>풍속: ${wind} m/s</p>
                    `;
                })
                .catch(error => {
                    resultDiv.innerHTML = "날씨 정보를 불러오는데 실패했습니다.";
                    console.error(error);
                });

            return false;
        }
    </script>

</body>

</html>